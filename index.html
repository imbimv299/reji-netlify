
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æœ¬ç‰©ãƒ¬ã‚¸é¢¨Webã‚¢ãƒ—ãƒª</title>
  <style>
    body { font-family: 'Arial', sans-serif; background: #f8f8f8; margin: 0; }
    .login, .main, .receipt { display: none; padding: 20px; }
    .active { display: block; }
    .header { background: #444; color: white; padding: 10px; font-size: 24px; }
    .btn { margin: 5px; padding: 10px 20px; font-size: 16px; }
    .product { border: 1px solid #ccc; padding: 10px; margin: 10px; background: #fff; }
    .alert { color: red; font-weight: bold; }
    #receiptArea { white-space: pre-wrap; background: #eee; padding: 10px; }
  </style>
</head>
<body>

<div class="login active" id="loginScreen">
  <h2>ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢</h2>
  <input type="text" id="username" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼ID"><br>
  <input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"><br>
  <button onclick="login()" class="btn">ãƒ­ã‚°ã‚¤ãƒ³</button>
</div>

<div class="main" id="mainScreen">
  <div class="header">ğŸ›’ ã‚µãƒ³ãƒ—ãƒ«åº—èˆ— - ã‚³ãƒ¼ãƒ‰: 1234</div>
  <h3>å•†å“ä¸€è¦§</h3>
  <div id="products"></div>
  <div id="cart"></div>
  <h4 id="totalDisplay">åˆè¨ˆ: 0å††</h4>
  <button onclick="checkout('cash')" class="btn" style="background: red; color: white;">ç¾é‡‘ä¼šè¨ˆ</button>
  <button onclick="checkout('emoney')" class="btn" style="background: blue; color: white;">é›»å­ãƒãƒãƒ¼ä¼šè¨ˆ</button>
  <h3>åœ¨åº«è£œå……</h3>
  <input type="text" id="restockName" placeholder="å•†å“å">
  <input type="number" id="restockQty" placeholder="æ•°é‡">
  <button onclick="restock()" class="btn">è£œå……</button>
</div>

<div class="receipt" id="receiptScreen">
  <h3>ğŸ§¾ ãƒ¬ã‚·ãƒ¼ãƒˆ</h3>
  <div id="receiptArea"></div>
  <button onclick="printReceipt()" class="btn">å°åˆ·</button>
</div>

<audio id="soundBeep" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="soundPay" src="https://actions.google.com/sounds/v1/cash_register/cash_register_1.ogg"></audio>

<script>
  const users = { "demo": "1234", "admin": "adminpass" };
  const inventory = {
    "ãƒªãƒ³ã‚´": { price: 100, stock: 5 },
    "ãƒãƒŠãƒŠ": { price: 150, stock: 2 },
    "ã‚ªãƒ¬ãƒ³ã‚¸": { price: 120, stock: 3 }
  };
  const cart = {};

  function login() {
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if (users[u] === p) {
      document.getElementById("loginScreen").classList.remove("active");
      document.getElementById("mainScreen").classList.add("active");
      renderProducts();
    } else {
      alert("ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—");
    }
  }

  function renderProducts() {
    const pDiv = document.getElementById("products");
    pDiv.innerHTML = "";
    for (const [name, data] of Object.entries(inventory)) {
      const stockAlert = data.stock <= 1 ? "<span class='alert'>æ®‹ã‚Šã‚ãšã‹!</span>" : "";
      pDiv.innerHTML += `
        <div class='product'>
          <strong>${name}</strong> - ${data.price}å†† (${data.stock}å€‹) ${stockAlert}<br>
          <button class='btn' onclick="addToCart('${name}')">è¿½åŠ </button>
        </div>`;
    }
  }

  function addToCart(name) {
    if (inventory[name].stock <= 0) return alert("åœ¨åº«åˆ‡ã‚Œ");
    cart[name] = (cart[name] || 0) + 1;
    inventory[name].stock--;
    document.getElementById("soundBeep").play();
    updateCart();
    renderProducts();
  }

  function updateCart() {
    let html = "", total = 0;
    for (const [name, qty] of Object.entries(cart)) {
      const price = inventory[name].price;
      total += price * qty;
      html += `<div>${name} x${qty} = ${price * qty}å††</div>`;
    }
    document.getElementById("cart").innerHTML = html;
    document.getElementById("totalDisplay").innerText = "åˆè¨ˆ: " + total + "å††";
  }

  function restock() {
    const name = document.getElementById("restockName").value;
    const qty = parseInt(document.getElementById("restockQty").value);
    if (!inventory[name]) inventory[name] = { price: 100, stock: 0 };
    inventory[name].stock += qty;
    renderProducts();
    alert(name + " ã‚’ " + qty + "å€‹ è£œå……ã—ã¾ã—ãŸ");
  }

  function checkout(method) {
    document.getElementById("soundPay").play();
    let receipt = "ğŸ§¾ ã‚µãƒ³ãƒ—ãƒ«åº—èˆ—ãƒ¬ã‚·ãƒ¼ãƒˆ
";
    let total = 0;
    for (const [name, qty] of Object.entries(cart)) {
      const price = inventory[name].price;
      receipt += `${name} x${qty} = ${price * qty}å††
`;
      total += price * qty;
    }
    receipt += "----------------
åˆè¨ˆ: " + total + "å††
æ”¯æ‰•æ–¹æ³•: " + method;
    document.getElementById("mainScreen").classList.remove("active");
    document.getElementById("receiptScreen").classList.add("active");
    document.getElementById("receiptArea").innerText = receipt;
  }

  function printReceipt() {
    const r = document.getElementById("receiptArea").innerText;
    const w = window.open("", "", "width=400,height=600");
    w.document.write("<pre>" + r + "</pre>");
    w.print();
  }
</script>

</body>
</html>
